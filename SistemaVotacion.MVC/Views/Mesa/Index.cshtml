@{
    ViewBag.Title = "Mesa - Buscar votante";

    int? padronId = ViewBag.PadronId as int?;
    string codigoAcceso = ViewBag.CodigoAcceso as string;
    bool mostrarVentanaCodigo = ViewBag.MostrarVentanaCodigo ?? false;
}

<h2>Mesa - Buscar votante</h2>

<form asp-controller="Mesa" asp-action="BuscarVotante" method="post">
    <div class="form-group">
        <label for="numeroIdentificacion">Cédula</label>
        <input type="text" class="form-control" id="numeroIdentificacion" name="numeroIdentificacion" required />
    </div>
    <button type="submit" class="btn btn-primary mt-2">Buscar</button>
   
</form>

@if (ViewBag.Error != null)
{
    <div class="alert alert-danger mt-3">
        @ViewBag.Error
    </div>
}

@if (mostrarVentanaCodigo && padronId.HasValue && !string.IsNullOrWhiteSpace(codigoAcceso))
{
    <div class="mt-4 d-flex justify-content-center">
        <div class="card" style="max-width: 320px;">
            <div class="card-header bg-secondary text-white">
                Código generado
            </div>
            <div class="card-body text-center">
                <p>Se ha generado el siguiente código para el votante:</p>
                <h2>@codigoAcceso</h2>

                <form asp-controller="Mesa" asp-action="Habilitar" method="post" class="mt-3">
                    <input type="hidden" name="padronId" value="@padronId.Value" />
                    <button type="submit" class="btn btn-success">Habilitar</button>
                </form>
            </div>
        </div>
    </div>
}