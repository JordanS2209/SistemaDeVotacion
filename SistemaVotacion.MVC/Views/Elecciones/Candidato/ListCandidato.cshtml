@model IEnumerable<SistemaVotacion.Modelos.Candidato>

@{
    ViewData["Title"] = "Lista de Candidatos";
}

<div class="elec-page">
    <div class="container-fluid py-3">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="elec-title mb-1">
                    <i class="bi bi-people"></i> @ViewData["Title"]
                </h2>
                <div class="elec-subtitle">
                    Gestiona candidatos y filtra por nombre, lista o dignidad.
                </div>
            </div>

            <a asp-action="CreateCandidato" class="btn elec-btn elec-btn-primary">
                <i class="bi bi-person-plus"></i> Crear Candidato
            </a>
        </div>

        <!-- Filtros -->
        <div class="elec-card mb-4">
            <div class="elec-card-header">
                <h5 class="mb-0"><i class="bi bi-funnel"></i> Filtros</h5>
            </div>
            <div class="elec-card-body">
                <form asp-action="FiltrarCandidatos" method="get" class="row g-3 align-items-end">

                    <div class="col-md-4">
                        <label class="form-label">Nombre</label>
                        <input type="text" name="nombre" class="form-control" placeholder="Buscar por nombre..." />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Lista</label>
                        <select name="lista" class="form-select" asp-items="ViewBag.Listas">
                            <option value="">-- Todas --</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Dignidad</label>
                        <select name="dignidad" class="form-select" asp-items="ViewBag.Dignidades">
                            <option value="">-- Todas --</option>
                        </select>
                    </div>

                    <div class="col-12 d-flex justify-content-end gap-2">
                        <button type="submit" class="btn elec-btn elec-btn-info">
                            <i class="bi bi-search"></i> Filtrar
                        </button>

                        <a asp-action="ListCandidato" class="btn elec-btn elec-btn-secondary">
                            <i class="bi bi-arrow-counterclockwise"></i> Limpiar
                        </a>
                    </div>

                </form>
            </div>
        </div>

        <!-- Tabla -->
        <div class="elec-table-wrap">
            <div class="table-responsive">
                <table class="table elec-table mb-0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre Candidato</th>
                            <th>Lista</th>
                            <th>Proceso</th>
                            <th>Dignidad</th>
                            <th class="text-end">Acciones</th>
                        </tr>
                    </thead>

                    <tbody>
                        @if (Model != null && Model.Any())
                        {
                            foreach (var item in Model)
                            {
                                <tr>
                                    <td>@item.Id</td>
                                    <td class="fw-bold text-primary">@item.NombreCandidato</td>
                                    <td>
                                        <span class="badge bg-light text-dark border">
                                            @item.Lista?.NombreLista (@item.Lista?.NumeroLista)
                                        </span>
                                    </td>
                                    <td class="small text-muted">@item.Lista?.Proceso?.NombreProceso</td>
                                    <td>@item.Dignidad?.NombreDignidad</td>

                                    <td class="text-end">
                                        <div class="d-inline-flex gap-2">
                                            <a asp-action="EditCandidato"
                                               asp-route-id="@item.Id"
                                               class="btn elec-btn elec-btn-warn btn-sm">
                                                Editar
                                            </a>

                                            <a asp-action="DetailsCandidato"
                                               asp-route-id="@item.Id"
                                               class="btn elec-btn elec-btn-info btn-sm">
                                                Detalles
                                            </a>

                                            <a asp-action="DeleteCandidato"
                                               asp-route-id="@item.Id"
                                               class="btn elec-btn elec-btn-danger btn-sm">
                                                Eliminar
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="5" class="text-center opacity-75 py-4">
                                    No hay candidatos para mostrar.
                                </td>
                            </tr>
                        }
                    </tbody>

                </table>
            </div>
        </div>

    </div>
</div>
